<!DOCTYPE html> <html> <head> <meta charset="utf-8">
<link href="/assets/libs/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet" media="all" />
<link href="/assets/libs/lr/jquery.lr_box.css" rel="stylesheet" media="all" />
<link href="/assets/libs/lr/jquery.lr_element.css" rel="stylesheet" media="all" />
 <script src="/assets/js/require.min.js"></script>


//自定义内容的按钮
<div id="show_btn"></div>

<script>

    require.config({
        paths: {
            jquery: '/resource/pub/js/jq/jquery-3.2.1',
            lrBase: '/assets/libs/lr/jquery-lr_base',
            lrBox: '/assets/libs/lr/jquery-lr_box',
            lrEle: '/assets/libs/lr/jquery-lr_element',
        }
    });
    require(['jquery', 'lrEle', 'lrBox'], function ($, lrEle, lrBox) {
    //创建一个倒计时按钮 发短信用
    var diyBtn = lrEle.makeBtn({
        data: {'rest': 3},
        name: 'sms_btn',
        'class': 'btnLr btnLrDefault',
        value: '剩余数量:{rest}'
        ,restNum: '{rest}'
        ,onload: function (btn) {
            lrBox.msgTisf('当前数量:' + btn.restNum);
            btn.timer({
                time: 1000,
                while: function () {
                    return (btn.restNum == 0);
                },
                end: function () {
                    lrBox.msgTisf('时间结束');
                    btn.value = '结束';
                },
                repeat: true, // 一直循环：true 结合while参数使用; 自定义执行次数：1+ 不需要配置while; 1或0或false：表示执行1次
                func: function (){
                    btn.restNum -= 1;
                    btn.data  = {'rest': btn.restNum};
                    lrBox.msgTisf('剩余数量:' + btn.restNum);
                }
            });
        }
    });

  $('#show_btn').append(diyBtn);
});

</script>
