<!DOCTYPE html> <html> <head> <meta charset="utf-8">
<link href="/resource/pub/css/jquery.lr_box.css" rel="stylesheet" media="all" />
<link href="/resource/pub/css/jquery.lr_element.css" rel="stylesheet" media="all" />
<script src="/resource/pub/js/jq/jquery-3.2.1.js"></script>
<!--<script src="/resource/pub/js/jq_element/jquery.ajaxfileupload.js"></script>-->
<script src="/resource/pub/js/jquery-lr_base.js"></script>
<script src="/resource/pub/js/jquery-lr_box.js"></script>
<script src="/resource/pub/js/jquery-lr_base.js"></script>
<script src="/resource/pub/js/jquery-lr_element.js"></script>

//简单的单文件上传控件
<div id="show_input_file"></div>

<script>

    //自定义样式的文件上传
    var picUrl = '/upload/tool_upload_test.jpg?r='+ Math.random()*100;
    $('#show_input_file').append(
        makeInput({
            data: {'url': '/resource/pub/images/logo.png'},
            'class': 'uploadBtn',
            name: 'demo',
            type: 'file',
            url:'/?s=tool/upload_file&input_name=demo', //上传url
            success_key: 'id',
            success_value: '0388',
            success_func: function (input_, response) {
                //去掉loading内容
                //if(loadObj) loadObj.remove();
                var newPicUrl = response['info'];
                newPicUrl = noCacheImg(newPicUrl);
                console.log(newPicUrl);
                input_['value'] = newPicUrl; //新url
                input_['prev']['value'] = newPicUrl; //新url
            },
            err_func: function (data) {
                msgTisf(data.info);
            },
            'change': function (obj) {  //选中文件时执行

            },
            //预览图参数 prev|preview|view
            prev: {
                width: '60px',
                height: '60px',
                value: '{url}',
                pos: 'l',
                click: function (img) {
                    var url  = img.attr('src');
                    hideNewBox();
                    msgViewImg(url, {width: 420});
                }
            }
        })
    );
</script>